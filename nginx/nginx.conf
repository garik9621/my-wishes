server {
  listen 80;
  server_name _;

  # API proxy to php-fpm
  location ~ ^/api(/.*)?$ {
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME /var/www/html/public/index.php;
    fastcgi_param REQUEST_URI $request_uri;
    fastcgi_param QUERY_STRING $query_string;
    fastcgi_pass php:9000;
  }

  # Default response for root
  location / {
    return 200 'Backend API server running. Frontend available at http://localhost:5173';
    add_header Content-Type text/plain;
  }
}
